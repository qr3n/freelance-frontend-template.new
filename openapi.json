{"openapi":"3.1.0","info":{"title":"Dish Management API","version":"0.1.0"},"paths":{"/api/v1/auth/send-code":{"post":{"tags":["authentication"],"summary":"Send Code","description":"Send verification code to email or phone.\n\nArgs:\n    data: Contact information (email or phone)\n\nReturns:\n    Success message\n\nRaises:\n    HTTPException: 429 if rate limit exceeded","operationId":"send_code_api_v1_auth_send_code_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SendCodeSchema"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","title":"Response Send Code Api V1 Auth Send Code Post"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/auth/verify-code":{"post":{"tags":["authentication"],"summary":"Verify Code","description":"Verify code and login. Creates user if doesn't exist.\n\nArgs:\n    data: Verification code data\n    request: FastAPI request object\n    response: FastAPI response object\n\nReturns:\n    User data\n\nRaises:\n    HTTPException: 400 if code is invalid/expired/used, 429 if too many attempts","operationId":"verify_code_api_v1_auth_verify_code_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/VerifyCodeSchema"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserResponseSchema"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/auth/logout":{"post":{"tags":["authentication"],"summary":"Logout","description":"Logout user by invalidating session.\n\nArgs:\n    response: FastAPI response object\n    session_token: Session token from cookie","operationId":"logout_api_v1_auth_logout_post","parameters":[{"name":"session_id","in":"cookie","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Session Id"}}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/auth/me":{"get":{"tags":["authentication"],"summary":"Get Current User Info","description":"Get current user information.\n\nArgs:\n    current_user: Current authenticated user\n\nReturns:\n    User data","operationId":"get_current_user_info_api_v1_auth_me_get","parameters":[{"name":"session_id","in":"cookie","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Session Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserResponseSchema"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/auth/sessions":{"get":{"tags":["authentication"],"summary":"Get User Sessions","description":"Get all active sessions for current user.\n\nArgs:\n    current_user: Current authenticated user\n\nReturns:\n    List of user sessions","operationId":"get_user_sessions_api_v1_auth_sessions_get","parameters":[{"name":"session_id","in":"cookie","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Session Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/SessionInfoSchema"},"title":"Response Get User Sessions Api V1 Auth Sessions Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/auth/sessions/{sid}":{"delete":{"tags":["authentication"],"summary":"Delete Session","description":"Delete a specific session.\n\nArgs:\n    sid: Session UUID to delete\n    current_user: Current authenticated user\n\nRaises:\n    HTTPException: 404 if session not found or doesn't belong to user","operationId":"delete_session_api_v1_auth_sessions__sid__delete","parameters":[{"name":"sid","in":"path","required":true,"schema":{"type":"string","title":"Sid"}},{"name":"session_id","in":"cookie","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Session Id"}}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/businesses":{"post":{"tags":["businesses"],"summary":"Create Business","description":"Create a new business with Telegram bot.","operationId":"create_business_api_v1_businesses_post","parameters":[{"name":"session_id","in":"cookie","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Session Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BusinessCreateSchema"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BusinessResponseSchema"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["businesses"],"summary":"Get User Businesses","description":"Get all businesses owned by current user.","operationId":"get_user_businesses_api_v1_businesses_get","parameters":[{"name":"session_id","in":"cookie","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Session Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/BusinessResponseSchema"},"title":"Response Get User Businesses Api V1 Businesses Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/businesses/{business_id}":{"get":{"tags":["businesses"],"summary":"Get Business","description":"Get business by ID.","operationId":"get_business_api_v1_businesses__business_id__get","parameters":[{"name":"business_id","in":"path","required":true,"schema":{"type":"string","title":"Business Id"}},{"name":"session_id","in":"cookie","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Session Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BusinessResponseSchema"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"put":{"tags":["businesses"],"summary":"Update Business","description":"Update a business.","operationId":"update_business_api_v1_businesses__business_id__put","parameters":[{"name":"business_id","in":"path","required":true,"schema":{"type":"string","title":"Business Id"}},{"name":"session_id","in":"cookie","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Session Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BusinessUpdateSchema"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BusinessResponseSchema"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["businesses"],"summary":"Delete Business","description":"Delete a business.","operationId":"delete_business_api_v1_businesses__business_id__delete","parameters":[{"name":"business_id","in":"path","required":true,"schema":{"type":"string","title":"Business Id"}},{"name":"session_id","in":"cookie","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Session Id"}}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/dishes":{"get":{"tags":["dishes"],"summary":"Get Dishes","description":"Retrieve all dishes, optionally filtered by business.\n\nArgs:\n    request: FastAPI request object\n    business_id: Optional business UUID to filter by\n\nReturns:\n    List of dishes","operationId":"get_dishes_api_v1_dishes_get","parameters":[{"name":"business_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filter by business ID","title":"Business Id"},"description":"Filter by business ID"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/DishResponseSchema"},"title":"Response Get Dishes Api V1 Dishes Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"post":{"tags":["dishes"],"summary":"Create Dish","description":"Create a new dish.\n\nArgs:\n    dish_data: Dish creation data including base64 image\n    request: FastAPI request object\n    current_user: Current authenticated user\n\nReturns:\n    Created dish data\n\nRaises:\n    HTTPException: 400 if image is invalid, 403 if access denied, 404 if business not found","operationId":"create_dish_api_v1_dishes_post","parameters":[{"name":"session_id","in":"cookie","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Session Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/DishCreateSchema"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DishResponseSchema"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/dishes/search":{"post":{"tags":["dishes"],"summary":"Search Dishes","description":"Search dishes by keywords and filters.\n\nDesigned for AI agent tool calls.\n\nRequest body example:\n{\n    \"query\": [\"курица\", \"томаты\"],\n    \"category\": [\"main\", \"appetizer\"],\n    \"cuisine\": [\"italian\"],\n    \"price_max\": 500.0,\n    \"business_id\": \"uuid-here\"\n}","operationId":"search_dishes_api_v1_dishes_search_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/DishSearchSchema"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/DishResponseSchema"},"type":"array","title":"Response Search Dishes Api V1 Dishes Search Post"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/dishes/{dish_id}":{"get":{"tags":["dishes"],"summary":"Get Dish","description":"Retrieve a single dish by ID.\n\nArgs:\n    dish_id: UUID of the dish\n    request: FastAPI request object\n\nReturns:\n    Dish data\n\nRaises:\n    HTTPException: 404 if dish not found","operationId":"get_dish_api_v1_dishes__dish_id__get","parameters":[{"name":"dish_id","in":"path","required":true,"schema":{"type":"string","title":"Dish Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DishResponseSchema"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"put":{"tags":["dishes"],"summary":"Update Dish","description":"Update an existing dish.\n\nArgs:\n    dish_id: UUID of the dish to update\n    dish_data: Updated dish data\n    request: FastAPI request object\n    current_user: Current authenticated user\n\nReturns:\n    Updated dish data\n\nRaises:\n    HTTPException: 404 if dish not found, 403 if access denied, 400 if image is invalid","operationId":"update_dish_api_v1_dishes__dish_id__put","parameters":[{"name":"dish_id","in":"path","required":true,"schema":{"type":"string","title":"Dish Id"}},{"name":"session_id","in":"cookie","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Session Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/DishUpdateSchema"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DishResponseSchema"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["dishes"],"summary":"Delete Dish","description":"Delete a dish.\n\nArgs:\n    dish_id: UUID of the dish to delete\n    current_user: Current authenticated user\n\nRaises:\n    HTTPException: 404 if dish not found, 403 if access denied","operationId":"delete_dish_api_v1_dishes__dish_id__delete","parameters":[{"name":"dish_id","in":"path","required":true,"schema":{"type":"string","title":"Dish Id"}},{"name":"session_id","in":"cookie","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Session Id"}}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/businesses/{business_id}/tables":{"post":{"tags":["tables"],"summary":"Create Table","description":"Create a new table for a business.","operationId":"create_table_api_v1_businesses__business_id__tables_post","parameters":[{"name":"business_id","in":"path","required":true,"schema":{"type":"string","title":"Business Id"}},{"name":"session_id","in":"cookie","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Session Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TableCreateSchema"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TableResponseSchema"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["tables"],"summary":"Get Tables","description":"Get all tables for a business.","operationId":"get_tables_api_v1_businesses__business_id__tables_get","parameters":[{"name":"business_id","in":"path","required":true,"schema":{"type":"string","title":"Business Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/TableResponseSchema"},"title":"Response Get Tables Api V1 Businesses  Business Id  Tables Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/businesses/{business_id}/tables/{table_id}":{"get":{"tags":["tables"],"summary":"Get Table","description":"Get a specific table.","operationId":"get_table_api_v1_businesses__business_id__tables__table_id__get","parameters":[{"name":"business_id","in":"path","required":true,"schema":{"type":"string","title":"Business Id"}},{"name":"table_id","in":"path","required":true,"schema":{"type":"string","title":"Table Id"}},{"name":"session_id","in":"cookie","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Session Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TableResponseSchema"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"put":{"tags":["tables"],"summary":"Update Table","description":"Update a table.","operationId":"update_table_api_v1_businesses__business_id__tables__table_id__put","parameters":[{"name":"business_id","in":"path","required":true,"schema":{"type":"string","title":"Business Id"}},{"name":"table_id","in":"path","required":true,"schema":{"type":"string","title":"Table Id"}},{"name":"session_id","in":"cookie","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Session Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TableUpdateSchema"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TableResponseSchema"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["tables"],"summary":"Delete Table","description":"Delete a table (soft delete).","operationId":"delete_table_api_v1_businesses__business_id__tables__table_id__delete","parameters":[{"name":"business_id","in":"path","required":true,"schema":{"type":"string","title":"Business Id"}},{"name":"table_id","in":"path","required":true,"schema":{"type":"string","title":"Table Id"}},{"name":"session_id","in":"cookie","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Session Id"}}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/businesses/{business_id}/tables/{table_id}/bookings":{"post":{"tags":["tables"],"summary":"Book Table","description":"Book a table (public endpoint).","operationId":"book_table_api_v1_businesses__business_id__tables__table_id__bookings_post","parameters":[{"name":"business_id","in":"path","required":true,"schema":{"type":"string","title":"Business Id"}},{"name":"table_id","in":"path","required":true,"schema":{"type":"string","title":"Table Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TableBookingCreateSchema"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TableBookingResponseSchema"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["tables"],"summary":"Get Table Bookings","description":"Get all bookings for a table.","operationId":"get_table_bookings_api_v1_businesses__business_id__tables__table_id__bookings_get","parameters":[{"name":"business_id","in":"path","required":true,"schema":{"type":"string","title":"Business Id"}},{"name":"table_id","in":"path","required":true,"schema":{"type":"string","title":"Table Id"}},{"name":"session_id","in":"cookie","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Session Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/TableBookingResponseSchema"},"title":"Response Get Table Bookings Api V1 Businesses  Business Id  Tables  Table Id  Bookings Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/businesses/{business_id}/tables/{table_id}/bookings/{booking_id}":{"delete":{"tags":["tables"],"summary":"Cancel Booking","description":"Cancel a booking.","operationId":"cancel_booking_api_v1_businesses__business_id__tables__table_id__bookings__booking_id__delete","parameters":[{"name":"business_id","in":"path","required":true,"schema":{"type":"string","title":"Business Id"}},{"name":"table_id","in":"path","required":true,"schema":{"type":"string","title":"Table Id"}},{"name":"booking_id","in":"path","required":true,"schema":{"type":"string","title":"Booking Id"}},{"name":"session_id","in":"cookie","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Session Id"}}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/businesses/{business_id}/tables/bulk":{"post":{"tags":["tables"],"summary":"Bulk Update Tables","description":"Bulk create/update/delete tables for a business.\n\n- Creates new tables if total_tables > current count\n- Deletes tables (soft delete) if total_tables < current count (only if no active bookings)\n- Updates capacity for all tables","operationId":"bulk_update_tables_api_v1_businesses__business_id__tables_bulk_post","parameters":[{"name":"business_id","in":"path","required":true,"schema":{"type":"string","title":"Business Id"}},{"name":"session_id","in":"cookie","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Session Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BulkTablesSchema"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BulkTablesResponseSchema"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/":{"get":{"summary":"Root","description":"Root endpoint.","operationId":"root__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}}},"components":{"schemas":{"BulkTablesResponseSchema":{"properties":{"created":{"type":"integer","title":"Created"},"updated":{"type":"integer","title":"Updated"},"deleted":{"type":"integer","title":"Deleted"},"total":{"type":"integer","title":"Total"},"tables":{"items":{"$ref":"#/components/schemas/TableResponseSchema"},"type":"array","title":"Tables"}},"type":"object","required":["created","updated","deleted","total","tables"],"title":"BulkTablesResponseSchema","description":"Response schema for bulk table operations."},"BulkTablesSchema":{"properties":{"total_tables":{"type":"integer","maximum":100.0,"exclusiveMinimum":0.0,"title":"Total Tables"},"default_capacity":{"type":"integer","maximum":20.0,"exclusiveMinimum":0.0,"title":"Default Capacity"},"default_floor":{"type":"integer","title":"Default Floor","default":1}},"type":"object","required":["total_tables","default_capacity"],"title":"BulkTablesSchema","description":"Schema for bulk table creation/update."},"BusinessCreateSchema":{"properties":{"name":{"type":"string","maxLength":255,"minLength":3,"title":"Name"},"description":{"type":"string","maxLength":2000,"minLength":10,"title":"Description"},"business_type":{"$ref":"#/components/schemas/BusinessType"},"telegram_bot_token":{"type":"string","minLength":10,"title":"Telegram Bot Token"}},"type":"object","required":["name","description","business_type","telegram_bot_token"],"title":"BusinessCreateSchema","description":"Schema for creating a new business."},"BusinessResponseSchema":{"properties":{"id":{"type":"string","title":"Id"},"owner_id":{"type":"string","title":"Owner Id"},"name":{"type":"string","title":"Name"},"description":{"type":"string","title":"Description"},"business_type":{"type":"string","title":"Business Type"},"is_active":{"type":"boolean","title":"Is Active"},"created_at":{"type":"string","title":"Created At"},"updated_at":{"type":"string","title":"Updated At"}},"type":"object","required":["id","owner_id","name","description","business_type","is_active","created_at","updated_at"],"title":"BusinessResponseSchema","description":"Schema for business responses."},"BusinessType":{"type":"string","enum":["restaurant","parking","retail","service","other"],"title":"BusinessType","description":"Enum for business types."},"BusinessUpdateSchema":{"properties":{"name":{"anyOf":[{"type":"string","maxLength":255,"minLength":3},{"type":"null"}],"title":"Name"},"description":{"anyOf":[{"type":"string","maxLength":2000,"minLength":10},{"type":"null"}],"title":"Description"},"business_type":{"anyOf":[{"$ref":"#/components/schemas/BusinessType"},{"type":"null"}]},"telegram_bot_token":{"anyOf":[{"type":"string","minLength":10},{"type":"null"}],"title":"Telegram Bot Token"},"is_active":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Is Active"}},"type":"object","title":"BusinessUpdateSchema","description":"Schema for updating a business."},"DishCreateSchema":{"properties":{"business_id":{"type":"string","title":"Business Id","description":"Business UUID"},"title":{"type":"string","maxLength":100,"minLength":3,"title":"Title"},"description":{"type":"string","maxLength":500,"minLength":10,"title":"Description"},"price":{"type":"string","pattern":"^\\d+(\\.\\d{1,2})?$","title":"Price"},"image":{"type":"string","title":"Image","description":"Base64 encoded image"},"is_available":{"type":"boolean","title":"Is Available","default":true},"tags":{"items":{"type":"string"},"type":"array","title":"Tags","description":"Tags for categorization"},"category":{"anyOf":[{"type":"string","maxLength":50},{"type":"null"}],"title":"Category","description":"Dish category"},"cuisine":{"anyOf":[{"type":"string","maxLength":50},{"type":"null"}],"title":"Cuisine","description":"Cuisine type"},"ingredients":{"items":{"type":"string"},"type":"array","title":"Ingredients","description":"Main ingredients"},"allergens":{"items":{"type":"string"},"type":"array","title":"Allergens","description":"Known allergens"}},"type":"object","required":["business_id","title","description","price","image"],"title":"DishCreateSchema","description":"Schema for creating a new dish."},"DishResponseSchema":{"properties":{"id":{"type":"string","title":"Id"},"business_id":{"type":"string","title":"Business Id"},"title":{"type":"string","title":"Title"},"description":{"type":"string","title":"Description"},"price":{"type":"string","title":"Price"},"image":{"type":"string","title":"Image"},"is_available":{"type":"boolean","title":"Is Available"},"tags":{"items":{"type":"string"},"type":"array","title":"Tags"},"category":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Category"},"cuisine":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Cuisine"},"ingredients":{"items":{"type":"string"},"type":"array","title":"Ingredients"},"allergens":{"items":{"type":"string"},"type":"array","title":"Allergens"},"created_at":{"type":"string","title":"Created At"},"updated_at":{"type":"string","title":"Updated At"}},"type":"object","required":["id","business_id","title","description","price","image","is_available","tags","category","cuisine","ingredients","allergens","created_at","updated_at"],"title":"DishResponseSchema","description":"Schema for dish responses."},"DishSearchSchema":{"properties":{"query":{"items":{"type":"string"},"type":"array","minItems":1,"title":"Query","description":"List of keywords to search for"},"category":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Category","description":"List of categories to filter by"},"cuisine":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Cuisine","description":"List of cuisine types to filter by"},"price_max":{"anyOf":[{"type":"number","exclusiveMinimum":0.0},{"type":"null"}],"title":"Price Max","description":"Maximum price filter"},"business_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Business Id","description":"Business UUID to filter by"},"is_available":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Is Available","description":"Filter by availability"}},"type":"object","required":["query"],"title":"DishSearchSchema","description":"Schema for AI agent dish search."},"DishUpdateSchema":{"properties":{"title":{"anyOf":[{"type":"string","maxLength":100,"minLength":3},{"type":"null"}],"title":"Title"},"description":{"anyOf":[{"type":"string","maxLength":500,"minLength":10},{"type":"null"}],"title":"Description"},"price":{"anyOf":[{"type":"string","pattern":"^\\d+(\\.\\d{1,2})?$"},{"type":"null"}],"title":"Price"},"image":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Image","description":"Base64 encoded image"},"is_available":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Is Available"},"tags":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Tags","description":"Tags for categorization"},"category":{"anyOf":[{"type":"string","maxLength":50},{"type":"null"}],"title":"Category","description":"Dish category"},"cuisine":{"anyOf":[{"type":"string","maxLength":50},{"type":"null"}],"title":"Cuisine","description":"Cuisine type"},"ingredients":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Ingredients","description":"Main ingredients"},"allergens":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Allergens","description":"Known allergens"}},"type":"object","title":"DishUpdateSchema","description":"Schema for updating a dish."},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"SendCodeSchema":{"properties":{"contact":{"type":"string","title":"Contact","description":"Email or phone number"}},"type":"object","required":["contact"],"title":"SendCodeSchema","description":"Schema for sending verification code."},"SessionInfoSchema":{"properties":{"id":{"type":"string","format":"uuid","title":"Id"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"last_activity":{"type":"string","format":"date-time","title":"Last Activity"},"expires_at":{"type":"string","format":"date-time","title":"Expires At"},"user_agent":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"User Agent"},"ip_address":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Ip Address"}},"type":"object","required":["id","created_at","last_activity","expires_at","user_agent","ip_address"],"title":"SessionInfoSchema","description":"Schema for session information."},"TableBookingCreateSchema":{"properties":{"telegram_id":{"type":"integer","title":"Telegram Id"},"guest_name":{"type":"string","maxLength":255,"minLength":1,"title":"Guest Name"},"guest_phone":{"anyOf":[{"type":"string","maxLength":20},{"type":"null"}],"title":"Guest Phone"},"num_guests":{"type":"integer","exclusiveMinimum":0.0,"title":"Num Guests"},"booking_date":{"type":"string","format":"date","title":"Booking Date"},"booking_time":{"type":"string","format":"time","title":"Booking Time"},"duration_minutes":{"type":"integer","exclusiveMinimum":0.0,"title":"Duration Minutes","default":120},"notes":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Notes"}},"type":"object","required":["telegram_id","guest_name","num_guests","booking_date","booking_time"],"title":"TableBookingCreateSchema"},"TableBookingResponseSchema":{"properties":{"id":{"type":"string","title":"Id"},"table_id":{"type":"string","title":"Table Id"},"telegram_id":{"type":"integer","title":"Telegram Id"},"guest_name":{"type":"string","title":"Guest Name"},"guest_phone":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Guest Phone"},"num_guests":{"type":"integer","title":"Num Guests"},"booking_date":{"type":"string","title":"Booking Date"},"booking_time":{"type":"string","title":"Booking Time"},"duration_minutes":{"type":"integer","title":"Duration Minutes"},"notes":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Notes"},"is_cancelled":{"type":"boolean","title":"Is Cancelled"},"created_at":{"type":"string","title":"Created At"},"updated_at":{"type":"string","title":"Updated At"}},"type":"object","required":["id","table_id","telegram_id","guest_name","guest_phone","num_guests","booking_date","booking_time","duration_minutes","notes","is_cancelled","created_at","updated_at"],"title":"TableBookingResponseSchema"},"TableCreateSchema":{"properties":{"table_number":{"type":"integer","exclusiveMinimum":0.0,"title":"Table Number"},"capacity":{"type":"integer","exclusiveMinimum":0.0,"title":"Capacity"},"floor":{"type":"integer","title":"Floor","default":1}},"type":"object","required":["table_number","capacity"],"title":"TableCreateSchema"},"TableResponseSchema":{"properties":{"id":{"type":"string","title":"Id"},"table_number":{"type":"integer","title":"Table Number"},"capacity":{"type":"integer","title":"Capacity"},"status":{"type":"string","title":"Status"},"is_active":{"type":"boolean","title":"Is Active"},"created_at":{"type":"string","title":"Created At"},"updated_at":{"type":"string","title":"Updated At"},"floor":{"type":"integer","title":"Floor"}},"type":"object","required":["id","table_number","capacity","status","is_active","created_at","updated_at","floor"],"title":"TableResponseSchema"},"TableStatusEnum":{"type":"string","enum":["available","booked","occupied"],"title":"TableStatusEnum"},"TableUpdateSchema":{"properties":{"table_number":{"anyOf":[{"type":"integer","exclusiveMinimum":0.0},{"type":"null"}],"title":"Table Number"},"capacity":{"anyOf":[{"type":"integer","exclusiveMinimum":0.0},{"type":"null"}],"title":"Capacity"},"status":{"anyOf":[{"$ref":"#/components/schemas/TableStatusEnum"},{"type":"null"}]},"is_active":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Is Active"},"floor":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Floor"}},"type":"object","title":"TableUpdateSchema"},"UserResponseSchema":{"properties":{"id":{"type":"string","format":"uuid","title":"Id"},"email":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Email"},"phone":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Phone"},"username":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Username"},"is_active":{"type":"boolean","title":"Is Active"},"is_verified":{"type":"boolean","title":"Is Verified"},"created_at":{"type":"string","format":"date-time","title":"Created At"}},"type":"object","required":["id","email","phone","username","is_active","is_verified","created_at"],"title":"UserResponseSchema","description":"Schema for user responses."},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"},"VerifyCodeSchema":{"properties":{"contact":{"type":"string","title":"Contact","description":"Email or phone number"},"code":{"type":"string","maxLength":6,"minLength":6,"title":"Code","description":"6-digit verification code"}},"type":"object","required":["contact","code"],"title":"VerifyCodeSchema","description":"Schema for verifying code and logging in."}}}}